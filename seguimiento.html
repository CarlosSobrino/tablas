<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
</head>
<body class="body">
	<div class="titulodiv">
	<h1 class="titulo">Seguimiento</h1>
	</div>
	<div class="botones">
		<button class="btn"  id="Gtabla" onclick="generar_tabla()" >Generar tabla</button>
		<button class="btn" onclick="location.href='index.html'" >atras</button>
	</div>
	<br>
	<br>
	<div class="criterios">
		<h2>CRITERIOS</h2>
		<br>
		<input type="text" id="criterio0">
		<input type="text" id="criterio1">
		<input type="text" id="criterio2">
		<input type="text" id="criterio3">
		<input type="text" id="criterio4">
		<br>
		<br>
	</div>
	<br>
	<br>	
	
</body>
<style type="text/css">
	.criterios{
		    
		    text-align: center;
		    border-bottom: solid;
	}

	.titulodiv{
		   text-align: center;
	}
	.titulo{
		    text-align: center;
    		font-size: 3em;
    		font-family: sans-serif;
    		color: royalblue;
	}
	.botones{
		    margin-top: 2%;
    		text-align: center;
	}
	.btn{
		font-size: 1.2em;
	    border-radius: 24%;
	    background: blueviolet;
	    color: antiquewhite;
	    width: 200px;
	    height: 100px;
	}
	.btn:hover{
		width: 190px;
		height: 90px;
		background: black;
    	color: antiquewhite;
	}
	table {
    border-collapse: collapse;
    width: 80%;
	}

	th, td {
	    text-align: left;
	    padding: 8px;
	}

	tr:nth-child(even){background-color: #f2f2f2}

	th {
	    background-color: #4CAF50;
	    color: white;
	}
	.Mym{
		column-count: 4;
	}
	#boton_1{
    text-decoration: none;
    padding: 3px;
    padding-left: 10px;
    padding-right: 10px;
    font-family: helvetica;
    font-weight: 300;
    font-size: 25px;
    font-style: italic;
    color: #006505;
    background-color: #82b085;
    border-radius: 15px;
    border: 3px double #006505;
  }
  #boton_1:hover{
    opacity: 0.6;
    text-decoration: none;
  }
</style>

<script type="text/javascript">

function generar_tabla(){
	var body = document.getElementsByTagName("body")[0];
	var players= ["-Frenchise-", "Alejomj", "alexa-la-guerrera", "alextorre","anzoO", "Ashitaka89", "BigHeart", "BlackBirds", "Blasphemia.", "blath", "Capitan nox", "carreti", "Centauro2000", "chemamecha", "Code", "Doctor SkizofrenicO", "drenthe1234", "GuArEn CoN DiStEmPeR.", "Jon Nieve SPA", "Jordi104-Infernal", "juliteitor", "kataclys", "keinshiro", "kontranikko", "lobos de mar", "malaguista", "MiHipoCrecia", "mirutxiland", "moriloco", "noisyboypran", "parra", "PePKaRJuS", "PIPO1", "Pitufo Hacker", "pokopelo...", "romanos15", "siul21", "speero as", "Thor40", "Thormento"];
	criteros=[];
	criteros[0]="Players";
	var i=0;
	var c=1;
	for(i=0;i<5;i++){
		var id="criterio"+i;
		var criterio=document.getElementById(id).value;
		if(criterio !==""){
				criteros[c]=criterio;
				c++;	
		}
	}
	 var p = document.createElement("p");
	 var botonGT=document.getElementById("Gtabla");


	 // Crea un elemento <table> y un elemento <tbody>
		  var tabla   = document.createElement("table");
		  tabla.id= "Tcri";
		  var tblBody = document.createElement("tbody");
		  var contador = 0;
		  // Crea las celdas
		  for (var i = 0; i < players.length+1; i++) {
		    // Crea las hileras de la tabla
		    var hilera = document.createElement("tr");
		 
		    for (var j = 0; j < criteros.length; j++) {
		      // Crea un elemento <td> y un nodo de texto, haz que el nodo de
		      // texto sea el contenido de <td>, ubica el elemento <td> al final
		      // de la hilera de la tabla
		      
		      if(i==0){
		      	var celda = document.createElement("th");
		      	celda.id="c"+j;
		      	celda.innerHTML=criteros[j];
		      	hilera.appendChild(celda);

		      }else{
		      	var celda = document.createElement("td");
		      	if(j==0){
		      		celda.id="player"+i;
		      		celda.innerHTML=players[i-1];
		      		hilera.appendChild(celda);
		      	}else{

			      var textoCelda = document.createElement("input");
			      var ids= "textocelda"+contador;
			      textoCelda.id=ids;
			      textoCelda.value= 0;
			      textoCelda.type="number";
			      celda.appendChild(textoCelda);
			      hilera.appendChild(celda);
			      contador++;
		    	}
			}
		}
		 tblBody.appendChild(hilera);
	}
	tabla.appendChild(tblBody);
	var br=document.createElement("br");

	//BOTON GENERAR BB
	var botonGenBB = document.createElement("button");
	botonGenBB.id="btngenBB";

	body.appendChild(br);
	body.appendChild(tabla);
	botonGT.disabled=true;

	var divCriterio=document.createElement("div");
	divCriterio.id="Mym";

	for (var k=1;k<criteros.length;k++){
		var h2= document.createElement("p");
		h2.innerHTML=criteros[k]+" (minimo,medio y maximo)";
		divCriterio.appendChild(h2);
		var min = document.createElement("input");
		min.type="number";
		min.value=0;
		divCriterio.appendChild(min);
		min.id="min"+k;
		var med = document.createElement("input");
		med.type="number";
		med.value=0;
		divCriterio.appendChild(med);
		med.id="med"+k;
		var mas = document.createElement("input");
		mas.type="number";
		mas.value=0;
		divCriterio.appendChild(mas);
		mas.id="mas"+k;

	}
	body.appendChild(br);
	body.appendChild(divCriterio);

	var boton_1 = document.createElement("button");
	boton_1.id="boton_1";
	boton_1.innerHTML="Generar CBB";
	if (boton_1.addEventListener) {
    			boton_1.addEventListener('click', CBB, false);
	} else {
   				boton_1.attachEvent('onclick', CBB);
	}

	body.appendChild(br);
	body.appendChild(boton_1);
	


  
}
function CBB(){
	var criterios=[];
	criterios[0]="Players";
	var i=0;
	var c=1;
	for(i=0;i<5;i++){
		var id="criterio"+i;
		var criterio=document.getElementById(id).value;
		if(criterio !==""){
				criterios[c]=criterio;
				c++;	
		}
	}
	var players= ["-Frenchise-", "Alejomj", "alexa-la-guerrera", "alextorre","anzoO", "Ashitaka89", "BigHeart", "BlackBirds", "Blasphemia.", "blath", "Capitan nox", "carreti", "Centauro2000", "chemamecha", "Code", "Doctor SkizofrenicO", "drenthe1234", "GuArEn CoN DiStEmPeR.", "Jon Nieve SPA", "Jordi104-Infernal", "juliteitor", "kataclys", "keinshiro", "kontranikko", "lobos de mar", "malaguista", "MiHipoCrecia", "mirutxiland", "moriloco", "noisyboypran", "parra", "PePKaRJuS", "PIPO1", "Pitufo Hacker", "pokopelo...", "romanos15", "siul21", "speero as", "Thor40", "Thormento"];


	var body = document.getElementsByTagName("body")[0];
	var codigoBB = document.createElement("div");
	var con =0;

//valor de las celdas
		var textarray=[];
		
		for (i=0; i<players.length*(criterios.length-1); i++){
			//text =+ document.getElementById("textocelda"+i).value;
			textarray[i]=document.getElementById("textocelda"+i).value;
		}




		var textTabla="<br>";
		
		
		 textTabla+="[table]";
		 textTabla+="<br>";
		 var cuerpo = document.createElement("div");
		 var cont=0;
		 var contplayer=0;
		 var contceldas=0;
		 for (var i = 0; i < players.length+1; i++) {
			var valorescalcular=[];
		    for (var j = 0; j < criterios.length+1; j++) {
		  		
		  		if(i==0){
		  			if(j==0){
		  				textTabla+="[**]"+criterios[cont];
		  				cont++;
		  			}else{
		  				if(j==criterios.length){
		  					textTabla+="[||]Puntos";
		  				}else{

			  				textTabla+="[||]"+criterios[cont];
			  				cont++;
			  			}
		  			}

		  		}else{
		  			if(j==0){
		  				textTabla+="[*][player]"+players[contplayer]+"[/player]";
		  				contplayer++;
		  			}else{
		  				if(j==criterios.length){
		  					textTabla+= "[|]"+calcular_puntos(valorescalcular);
		  					var valorescalcular=[];
		  				}else{
		  				    valorescalcular[j-1]=textarray[contceldas];
			  				textTabla+="[|]"+textarray[contceldas];
			  				contceldas++;
			  			}
		  			}
		  		}
		  		

		    }
		   
		    if(i==0){
		    	textTabla+="[/**]";
		    }
		    textTabla+="<br>";
		}
		textTabla+="\n[/table]";
		cuerpo.innerHTML=textTabla;
		var br=document.createElement("br");
		body.appendChild(br);
		codigoBB.appendChild(cuerpo);
		body.appendChild(codigoBB);
		var boton11 = document.getElementById("boton_1");
		boton11.disabled=true;

		var TextCriterios="<br><br>[spoiler=Criterrios]";
		TextCriterios+="<br>";
		TextCriterios+="Estos son los criterios con los cual hemos evaludo los puentos y la puntuacion total es, "+criterios.length*3+"Los criterios son los siguientes";

		for(var k=1;k<criterios.length;k++){
			TextCriterios+=criterios[k]+": La puntuacion es la siguientes entre"+document.getElementById("min"+i).value+" y " +document.getElementById("med"+i).value+" un total de [b]1 Punto[/b], Entre "+document.getElementById("med"+i).value+" y "+document.getElementById("mas"+i).value+"un total de [b]2 Punto[/b], y por ultimo si es mayor a "+document.getElementById("mas"+i).value;

			TextCriterios+="<br>";
		}
		TextCriterios="[/spoiler]";

		var divinfor = document.createElement("div");
		divinfor.innerHTML=TextCriterios;
		body.appendChild(divinfor);



		document.getElementById("Mym").style.display="none";
		//document.getElementById("criterios").style.display="none";
		document.getElementById("Tcri").style.display="none";


	body.appendChild(codigoBB);

}
function calcular_puntos(valorescalcular){
	var Puntos=0;
	for (var i = 1;i<valorescalcular.length+1;i++) {
		var min=document.getElementById("min"+i).value;
		var med=document.getElementById("med"+i).value;
		var mas=document.getElementById("mas"+i).value;

		if(parseInt(valorescalcular[i-1])>parseInt(min)&&parseInt(valorescalcular[i-1])<parseInt(med)){
			Puntos+=1;
		}else if(parseInt(valorescalcular[i-1])>parseInt(med)&&parseInt(valorescalcular[i-1])<parseInt(mas)){
			Puntos+=2;
		}else if(parseInt(valorescalcular[i-1])>parseInt(mas)){
			Puntos+=3;
		}
	}
	return(Puntos);
} 





</script>